
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Oh The Huge Manatee</title>
  <meta name="author" content="Campbell Vertesi (ohthehugemanatee)">

  
  <meta name="description" content="A quick note to all the Drupalists in the DC general area &ndash; Forum One is trying to put together a D8 core sprint in their DC office space. They &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ohthehugemanatee.github.io/blog/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Oh The Huge Manatee" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46172182-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Oh The Huge Manatee</a></h1>
  
    <h2>Drupal, Sysadminning, and Tech.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ohthehugemanatee.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/d8-core-sprint-in-dc/">D8 Core Sprint in DC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T16:27:17+02:00" pubdate data-updated="true">Jul 1<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A quick note to all the Drupalists in the DC general area &ndash; Forum One is trying to put together a D8 core sprint in their DC office space. They&rsquo;re coordinating with the DC Meetup group to try and spread the word to as many community members as possible!</p>

<p>If you haven&rsquo;t been to a code sprint before, it&rsquo;s basically a coding party. Developers get together and help each other contribute better and faster by reviewing code on the spot, mentoring each other, and generally working in small ad-hoc groups. It&rsquo;s a lot of fun, and gives a big boost to development of the next generation of Drupal.</p>

<p>Forum One will provide the locale in downtown DC complete with pizza, beer, and soda. We also have a few of our core mentors on hand to help you get started if this is your first time contributing to core. Because of the building security, if you want to attend you <a href="http://www.eventbrite.com/e/drupal-8-code-sprint-with-forum-one-tickets-11921354091">have to register first</a>! I won&rsquo;t be able to attend, but my colleagues <a href="https://twitter.com/johnbburg">John Brandenburg</a> and <a href="https://twitter.com/kalpanagoel">Kalpana Goel</a> will be there mentoring. Go sign up now!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/14/how-to-configure-authcache-on-drupal-7/">How to Configure Authcache on Drupal 7</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-14T16:15:40+02:00" pubdate data-updated="true">Jun 14<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So you have authenticated user traffic you want to cache? Good &ndash; you&rsquo;re on the right post. This post is a walk through for caching content for authenticated users in Drupal 7. We will be using the Authcache suite of modules. If you haven&rsquo;t read it yet, I strongly recommend you check out my last post, <a href="https://ohthehugemanatee.org/blog/2014/06/09/authenticated-user-caching-in-drupal/">Authenticated User Caching Concepts in Drupal 7</a>.</p>

<p>Our goal is a simple authenticated user caching system based on Authcache&rsquo;s AJAX implementation, with a Memcached backend. We will serve pages out of Drupal&rsquo;s own page cache, with placeholders for any content which could be customized to the logged in user. The user&rsquo;s browser will make a second call to the web server for the content that belongs in those placeholders. Whenever possible, the placeholders will be filled from browser cache or data stored in memcached. By the end of this post, we&rsquo;ll have a frontpage which loads for authenticated users without ever hitting the database.</p>

<h2>Install Authcache</h2>

<p>First you will need to set up a local installation to follow along. Set up an environment for Drupal 7 with memcached running. You can set up your own vanilla D7 site to work with &ndash; just create some devel content, an interesting panels-and-views based frontpage, and set up memcached. You can also use this <a href="/downloads/drupal/drupal_authcache.tgz">ready-to-go drush archived Drupal site</a>. Note that this is a rather large site; I like to generate 16,000 nodes or so so I can really feel the difference between a cached return and a live one. Apart from all those nodes, it has:</p>

<ul>
<li>Drupal 7-latest</li>
<li>Drupal&rsquo;s Memcache module. (Make sure your environment has memcached set up!)</li>
<li>A bunch of devel-generated content</li>
<li>A bunch of other handy modules for generating a faux-frontpage</li>
<li>Drupal&rsquo;s Authcache module</li>
<li>The caching-relevant portion of settings.php in a separate file called settings.caching.php.</li>
</ul>


<p>Install the Authcache module per usual, along with the following other modules:</p>

<ul>
<li>Authcache AJAX</li>
<li>Authcache Block</li>
<li>Authcache Builtin Storage Backend</li>
<li>Authcache Debug</li>
<li>Authcache Form</li>
<li>Authcache Page Manager</li>
<li>Authcache Panels</li>
<li>Authcache Panels by Page Manager</li>
<li>Authcache Personalization API</li>
<li>Authcache Views</li>
</ul>


<p>That&rsquo;s a lot of modules, because znerol has done a great job of compartmentalizing functionality. This is complicated stuff, and the less of it you have to enable, the better!</p>

<p>When you enable the modules, you&rsquo;ll get a message complaining that you don&rsquo;t have the cache backend configured yet. Add these two lines to your settings.php to let Drupal know about the Authcache backend:</p>

<figure class='code'><figcaption><span>settings.php</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;cache_backends&#39;</span><span class="p">][]</span> <span class="o">=</span> <span class="s1">&#39;sites/all/modules/authcache/authcache.cache.inc&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;cache_backends&#39;</span><span class="p">][]</span> <span class="o">=</span> <span class="s1">&#39;sites/all/modules/authcache/modules/authcache_builtin/authcache_builtin.cache.inc&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now your site is prepared to deliver cached content to authenticated users. Now comes the first scary bit: disable Drupal&rsquo;s built in page caching from admin/config/development/performance .</p>

<h2>Configure Authcache</h2>

<p>Now that you&rsquo;re set up to deliver cached content to authenticated users, we can get to the fun part: configuring. Unlike Anonymous user caching, in order to cache content for authenticated users we actually need to let our caching system know a little bit about the various components of a given page. The front page of the demo Drupal site you downloaded is a reasonably complicated one. Panels with Views and Quicktabs, including several blocks which are unique to each user. We have to go through each element which could be customized to a user, and set an authcache policy on it.</p>

<p>As we proceed, you will notice a little red button which has appeared in the top left corner of your browser window.</p>

<p><img class="left" src="/images/authcache-debug.png" width="300" title="authcache debug" alt="the authcache debug block"></p>

<p>This is Authcache Debug: a helpful little block which tells you if the page was delivered from cache, or if an element on there is still preventing the page from being cached. If you&rsquo;re logged in as admin, you&rsquo;ll notice that it says the page has been excluded of cache, because &ldquo;Caching disabled for superuser&rdquo;. So in order to test this properly, you&rsquo;ll have to create another user account to keep open in a separate browser window. Go ahead and do that now.</p>

<p>Once you&rsquo;re logged in as a user who SHOULD be seeing cached content, that Debug block will start coming in handy. Visit the frontpage as your test user, and note that it goes yellow (meaning it&rsquo;s cacheable, but it wasn&rsquo;t in cache yet), and then green on a reload. On that reload you&rsquo;ll see Cache Status &ldquo;HIT&rdquo;, and a few helpful statistics about the page&rsquo;s normal render time (460.17ms for me) vs its cached render time (3.85ms).</p>

<p>Technically I can end the guide here. My work here is done! You&rsquo;re caching content for authenticated users!</p>

<h2>Customizing content for cached, authenticated users</h2>

<p>If you try logging in as yet ANOTHER user, you&rsquo;ll start to notice some things which are a bit odd. For starters, that &ldquo;random post&rdquo; quickab is serving the same post every time. And once one user creates a node, and it is listed in the &ldquo;Your posts&rdquo; quicktab, that node is listed for EVERYONE in the &ldquo;your posts&rdquo; quicktab. This is because all we&rsquo;ve done so far is enable caching for authenticated users. Apart from the handful of page components which Authcache can detect and handle out-of-the-box (which we&rsquo;ll get to in a moment), everything is just being statically cached. One cache for every user, just like anonymous users get.</p>

<p>That&rsquo;s not what we signed up for. Some elements on the page actually need to be cached separately, on a per-user basis. Some of them should never be cached at all. Remember all those authcache modules we saw a moment ago? What are they doing, picking their noses?</p>

<p>Actually, some of those modules are already working for you. The most notable is authcache_form, which jumps into every Forms API based form &ndash; that is to say, all of them &ndash; and replaces the form token with a placeholder. The token gets filled in by AJAX after the rest of the page loads from cache. Authcache_comments works invisibly, too.</p>

<p>For the page elements which are less predictable than forms, authcache modules offer you, the administrator, a way to identify the elements which need special handling and set how they should be handled. So to get the rest of the page working properly, We have to identify a handful of page elements which need separate caching behavior from the rest of the frontpage.</p>

<p>Working from the top of the page downwards, first we&rsquo;ll deal with that &ldquo;Your posts&rdquo; quicktab. Edit the View which generates that block, at admin/structure/views/view/posts/edit/block_2 . If you expand the &ldquo;Advanced&rdquo; section on the right, you&rsquo;ll see that we have an &ldquo;Authcache&rdquo; section now! Open it up, and enable the &ldquo;authcache&rdquo; checkbox which appears. Now you have a wealth of options for caching just this View.</p>

<p><img class="center" src="/images/authcache-views.png" title="authcache views" alt="the authcache views interface"></p>

<p>Note that just because it&rsquo;s customized per user doesn&rsquo;t mean it shouldn&rsquo;t be cached! We can cache this fragment for about an hour before running that query again. Once we save the View and clear caches, if you return to the frontpage you&rsquo;ll find that each user gets their own &ldquo;Your posts&rdquo; block. Success!</p>

<p>The next block over in the quicktab, Random Post, is a little trickier. This one we want to change as often as possible. We could follow a similar approach to what we just did, and in Views&#8217; authcache settings just set a cache lifetime of 0. But in most cases this isn&rsquo;t necessary. On a truly high performance site, you should cache EVERYTHING, even if only for a few seconds. A cache lifetime of 5 or 10 seconds is usually short enough that users won&rsquo;t notice it; but your server will. For a block which appears on every page of the site, a 10 second cache lifetime can mean it only has to actually query and compute once when a user clicks through 3 links to find the content he wants. This is a sort of microcache, and it can save you CPU cycles. For this block, let&rsquo;s set a cache lifetime of 10 seconds. Set cache lifetime to &ldquo;Custom&rdquo;, and enter 10 seconds into the field which appears. This one does not have to be cached per user; it can be global.</p>

<p>You should apply these same tricks to all three blocks on the sidebar: users like you, recent comments, who&rsquo;s online, and who&rsquo;s new. But for the sake of practice, I&rsquo;ll show you a couple of different ways to get to that Authcache setting.</p>

<p>You can find it in the Panels Content admin screen (thanks, authcache_panels!).</p>

<p><img class="center" src="/images/authcache-panels.png" title="authcache panels" alt="the authcache panels interface"></p>

<p>You can find it on the Block configuration page (thanks, authcache_block!).</p>

<p><img class="center" src="/images/authcache-block.png" title="authcache block" alt="the authcache block interface"></p>

<p>(note: on the Demo site these are not positioned as blocks; they are positioned by panels. That means they don&rsquo;t go through blocks&#8217; normal render process, which means that authcache_block would be useless here!</p>

<p>Following this process you can deliver the frontpage to users, while only asking Drupal to generate one or two objects.</p>

<h2>Avoid the DB entirely</h2>

<p>The last step, once you have the page behaving the way you want, is probably my favorite. It is possible to have Authcache deliver pages without EVER hitting the database! In order to get this going, you need to make sure that all the information Authcache needs about your caching configuration is available either in settings.php, or in memcached. We also ned to tell Authcache to attempt building the page without a DB connection. This is surprisingly easy. With memcached already set up, we just need to add the following to settings.php</p>

<figure class='code'><figcaption><span>settings.php</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="c1">// Authcache should try to serve from cache without connecting to the DB.</span>
</span><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;authcache_builtin_cache_without_database&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">TRUE</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Cache settings that are usually set in the &#39;performance&#39; admin UI.</span>
</span><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;page_compression&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;page_cache_maximum_age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Tell Drupal that authcache keys should be stored in Memcached.</span>
</span><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;cache_class_cache_authcache_key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;MemCacheDrupal&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Tell Drupal that page cache should be stored in Memcached.</span>
</span><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;cache_class_cache_page&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;MemCacheDrupal&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s actually all there is to it. BAM! You&rsquo;re serving your frontpage without ever touching the DB.</p>

<h2>Troubleshooting/Going deeper</h2>

<p><strong>Some pages come up with a red light in Authcache Debug.</strong></p>

<p>That&rsquo;s normal. There are all sorts of situations in which you would not want to cache a page. If one of your test users creates a node and then visits that new node, you will notice just such a red light.</p>

<p><img class="center" src="/images/authcache-red.png" title="authcache red" alt="authcache cancels caching on a page"></p>

<p>Authcache Debug is your best friend here. Sometimes this is something simple, like in this example. All we need to do is enable authcache_menu, and this will turn green. Other times the problem is deeper. Perhaps there is a page element which needs a caching mechanism defined. Or perhaps a fragment that you have set to use ESI, isn&rsquo;t visible for the ESI tags to be evaluated.</p>

<p>It is also worth noting that authcache_debug is not infallible. There are definitely situations where it gets it wrong. Ultimately the best way to tell for certain is to open up your browser&rsquo;s developer tools and look at the Cache-Control headers yourself.</p>

<p><strong>That &ldquo;random&rdquo; block and the &ldquo;user&rdquo; block change on every page load! I thought I set a 1 hour cache lifetime on those. What gives?</strong></p>

<p>Authcache doesn&rsquo;t actually keep a cached copy of these fragments. It simply sets the Cache-Control header on the fragments to let any <em>external</em> caches know that it&rsquo;s OK to cache the fragment for a certain amount of time. Many web browsers respect this and will avoid the extra request. But even if your browser doesn&rsquo;t for some reason (it&rsquo;s in anonymous mode, or you have cache disabled because you&rsquo;re a developer, dammit!), there are other proxies that you can set up to see this in action. Varnish and NGINX will both normally respect the Cache-Control directive, so these fragments will not come from Drupal.</p>

<p><strong>It still seems like I&rsquo;m bootstrapping Drupal an awful lot&hellip; What else can I do?</strong></p>

<p>One of the cool tricks that comes with Authcache is a separate front controller. This is an alternative to Drupal&rsquo;s own index.php which handles normal page requests. The authcache front controller is much lighter weight, and can make direct calls to the DB without a full Drupal bootstrap. All of the authcache modules are designed to work well with it.</p>

<p>To set up the frontcontroller, simply copy sites/all/modules/authcache/modules/authcache_p13n/safe_frontcontroller/authcache.php to your site&rsquo;s root directory. Then add the following line to settings.php :</p>

<figure class='code'><figcaption><span>settings.php</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;authcache_p13n_frontcontroller_path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;authcache.php&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is actually recommended for most installations, not only because it makes the URL for fragments shorter; but it also saves some $_SERVER key rewrites which can cause problems.</p>

<p><strong>Caching ALL the things</strong></p>

<p>Authcache comes with a pretty sensible set of defaults as far as which pages should be cached. But you may want to tweak them. For example, you may want to exclude search result pages from caching. You can control this at admin/config/system/authcache/pagecaching .</p>

<p><strong>But what about (obscure problem X)</strong></p>

<p>Fixing obscure problems is not what blog posts are good at. They are good at showing you a basic method that will work in a lot of cases, or at least will teach you the fundamental concepts. The <a href="https://drupal.org/project/issues/authcache?categories=All">issue queue for Authcache</a> is active, and extremely well maintained. I can&rsquo;t remember the last time I encountered such an active module maintainer as znerol. Check it out!</p>

<p>But in case that doesn&rsquo;t help, the next blog post in this series is going to talk about advanced topics in authenticated user caching: expire module integration, ESI vs AJAX, stripping form tokens, and my favorite: planning a layered caching architecture for your site! See you then!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/09/authenticated-user-caching-in-drupal/">Authenticated User Caching Concepts in Drupal 7</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-09T22:21:01+02:00" pubdate data-updated="true">Jun 9<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Drupal has a wide variety of highly effective solutions for caching anonymous user content. The typical setup is APC, Memcached or Redis, and Varnish in front, and this can easily serve thousands of concurrent anonymous users. There is excellent documentation out there discussing this kind of simple caching.</p>

<p>But what about authenticated users? You can cache elements of the page using a method like <a href="https://drupal.org/project/rendercache">Render cache</a>, <a href="https://drupal.org/project/entitycache">Entity Cache</a>, or <a href="https://drupal.org/project/views_content_cache">Views Content Cache</a>. But Drupal still has to assemble each page for your users, a relatively heavy operation! If you want to address hundreds or thousands of authenticated users, you&rsquo;re simply SOL by these traditional approaches.</p>

<p>Enter the <a href="https://drupal.org/project/authcache">Auth Cache</a> suite of modules. Though this project has been around for quite some time, it had a reputation of being finicky and hard to set up. It got a significant rewrite in the last year thanks to <a href="https://drupal.org/users/znerol">znerol</a>, and is now a powerhouse of a module that brings authenticated user caching much closer to regular users.</p>

<p>I will say that this is still not for the squeamish. You have to really understand the building blocks of your site, and you will have to make a plan for each unique layout on your site. There are some page elements that are quite hard to build this way, but for the most part Authcache makes this easy.</p>

<h2>The theory</h2>

<p>The idea behind authenticated user caching is simple. We already have a great caching mechanism for pages that stay exactly the same for all users. So we simply identify the parts of the page that will change for each user, and use a placeholder for them instead. Think of it as a <user customized stuff here> tag in HTML. This way the page caching mechanism can ignore the customized content, and focus on the stuff that IS the same across all requests.</p>

<p>There are three major ways of doing this placeholder: AJAX, ESI, and Cookies.</p>

<p>With AJAX, you just include a little JS that says &ldquo;fill this DIV with the contents of <a href="http://example.com/user/customized/thing">http://example.com/user/customized/thing</a>&rdquo;. The client&rsquo;s web browser makes a second call to the server, which is configured to allow /user/customized/thing through the cache all the way to your website. Drupal (or whatever you&rsquo;re running) fills in the HTML that belongs in that div and returns it to the browser. Congratulations! You just served an authenticated user a page which was 99% cached. You only had to generate the contents of one div.</p>

<p>ESI is short for <a href="https://en.wikipedia.org/wiki/Edge_Side_Includes">Edge Side Includes</a>, a small extension to HTML which effectively does the same thing as that Javascript, but on the &ldquo;Edge server&rdquo;. The Edge server is whatever service touches the HTTP request last before sending it to the client. Apache, NGINX, Varnish, pound&hellip; you want this to happen as far down the stack as you control. An ESI tag in your HTML looks like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;esi:include src="http://example.com/user/customized/thing" onerror="continue"/&gt;</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s pretty clear, even to a human reader, what this tag means: &ldquo;replace this tag with the contents of <a href="http://example.com/user/customized/thing">http://example.com/user/customized/thing</a>&rdquo;. ESI actually supports some simple logic as well, but that&rsquo;s not really relevant to what we&rsquo;re doing here.</p>

<p>The only difference between ESI and AJAX is where the placeholder is filled. With ESI it happens on the edge service, and with AJAX it happens in the client browser. There is a subtle difference here: a page with ESI will not be delivered until all the ESI calls have returned something, while an AJAX page will return right away, even if the components don&rsquo;t immediately appear. On the other hand, ESI is much better for degraded browsers. YMMV.</p>

<p>The last method is using Cookies. You can store arbitrary information on cookies, as long as you&rsquo;re careful about security. That can be a very effective way to get certain limited information through a caching layer. Authcache actually comes with an example module for just such a use case. It passes the user&rsquo;s name and account URL in a cookie, so you can display it in a block.</p>

<p>This is effective for very small amounts of information, but keep it limited. Cookie headers aren&rsquo;t designed to hold large quantities of data, and reverse proxies can have a hard time if you put too much information in there. Still, it&rsquo;s a neat trick that can cover you for that &ldquo;Hello Username&rdquo; block.</p>

<h2>Authcache in Drupal</h2>

<p>The <a href="https://drupal.org/project/authcache">Authcache</a> suite of modules tries to automatically implement AJAX and/or ESI for you. It actually goes one step further, and implements a caching layer for those &ldquo;fragments&rdquo; which are to be returned via ESI/AJAX. The fragments can be stored in any caching system which implements <a href="http://api.drupal.org/api/drupal/includes%21cache.inc/interface/DrupalCacheInterface/7">DrupalCacheInterface</a>, ie any caching module you&rsquo;ve heard of. Memcache, APC, File Cache, Redis, MongoDB. The full page HTML with placeholders can be cached in Drupal&rsquo;s normal page cache, in Boost, or in Varnish.</p>

<p>Once you have these caching mechanisms defined, it&rsquo;s just a question of marking sections of your site which need a second callback. Authcache presents a large number of modules to do this. You can define any of the following as requiring a second call:</p>

<ul>
<li>Blocks</li>
<li>Views</li>
<li>Panels Panes</li>
<li>Fields</li>
<li>Comments</li>
<li>Flags</li>
<li>Forms</li>
<li>Forums</li>
<li>Polls</li>
<li>Votes</li>
</ul>


<p>&hellip; and that&rsquo;s all without writing a single line of custom code! Each one of those elements gets a new &ldquo;Authcache&rdquo; setting, where you can define it as needing a second callback, and set the method for the callback as either AJAX or ESI. You can even fall back to another method if the first one fails!</p>

<p>A good example of how this works is the Forms integration. Authcache will modify any and all forms on your site, so that they have an ESI or AJAX placeholder for the form token. This means that the form itself can be stored in your page cache (Varnish, Boost, or whatever), and the form token will be filled in automatically! That&rsquo;s a phenomenal speed improvement without any configuration beyond enabling the module.</p>

<p>Setting up Authcache is a little complicated, and I&rsquo;ll cover that in depth in my next post. But once the basic AJAX or ESI support is set up and these modules are enabled, caching authenticated users becomes a question of visiting each unique layout on your site and making a plan for each element that involves user customization. Authcache makes this easy.</p>

<p>Next post: <a href="https://ohthehugemanatee.org/blog/2014/06/14/how-to-configure-authcache-on-drupal-7/">How to configure Authcache on Drupal 7</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/drupal-superheroes-assemble/">Drupal Superheroes: ASSEMBLE!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-28T12:44:01+02:00" pubdate data-updated="true">May 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img alt="Drop Signal" src="/images/dropsignal.jpg" align=left> Regular Drupalcon attendees know that the opening pre-keynote session is one of the highlights of the con. That&rsquo;s the session where we welcome everyone to the con with stupid jokes, some well known Drupalists, and a lot of fun. This year is going to be especially good &ndash; and we need your help!</p>

<p>The evil Lord Over Engineering is threatening to delay the release of the CMS, which we need to save the world! The only way to stop him is to assemble the greatest force of Drupal superheroes ever assembled! Can the heroes save the day? Can we manage to make the final git push? You&rsquo;ll have to be there to find out!</p>

<blockquote><p>&ldquo;If you only get up early once during DrupalCon, this is the morning to do it. And hey, at least you&rsquo;ll get better seats for my keynote right after.&rdquo; &mdash; Dries</p></blockquote>

<p>In Prague we had the Drupal Opera, with <a href="http://www.youtube.com/watch?v=3eSxaNmGHYQ?t=11m9s" title="">solos sung by Gabor Hojtsy</a>. In Portland we had the Drupal Game show, including <a href="http://youtu.be/390cllsL7r8?t=30m9s">Doug Vann&rsquo;s amazing beatbox of the Tetris theme</a>. In Munich, we taught the world to yodel and pour good German beer. Don&rsquo;t miss out this year! The fun is just getting started!</p>

<p>If you want to participate onstage, you can go to <a href="http://www.robshouse.net/content/attention-drupal-super-heroes-your-powers-are-needed">Robert Douglass&#8217; blog</a> and sign up with our superhero/villain application form. But even if you just want to party from your comfy chair in the audience, costumes are encouraged! So get your best superhero costume together, and I&rsquo;ll see you at the pre-keynote!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/26/drupalcamp-helsinki-takes-on-the-world/">Drupalcamp Helsinki Takes on the World</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-26T15:14:58+02:00" pubdate data-updated="true">May 26<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last weekend I got to keynote <a href="http://drupalcamp.fi">Drupalcamp Helsinki</a> with my friend and often-collaborator, <a href="http://twitter.com/adamjurantenor">scaragucc</a> &ndash; and what a great camp it was! Organizer <a href="https://twitter.com/laurii1">Lauri Eskola</a> deserves tremendous credit for taking this camp to the next level. They doubled their attendance from last year, attracted positive attention from some great notables in the global Drupal world, and got their local community energized to engage more. At all the various after parties there were frequent toasts of &ldquo;one of the best Drupalcamps in the world!&rdquo;</p>

<p>Lauri and I met at the last <a href="http://szeged2014.drupaldays.org">Drupal Dev Days</a> event, in Szeged. That was also hailed as an example of a hugely successful Drupal event, and he took the lessons from their <a href="https://docs.google.com/file/d/0B6xsrc5BVkagNVpoeEFDZy1RMVk/edit">in-depth report</a> to heart. To be fair, the local volunteers and sponsors also clearly busted their humps getting people registered, and finding good session speakers to work with.</p>

<p>The result was a really positive Drupal event for all of us. Their attendance shot past the 200 mark for the first time, their code sprint had more involvement than ever before, and their social activities were a huge success. We left Finland full of positive feeling for the local association there, the city of Helsinki, and of course the sauna culture! This was a great example of what a Drupal community event can be. I&rsquo;m looking forward to next year already.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/18/recovering-photos-and-data-from-a-keylocked-android-phone/">How to Recover Photos and Data From a Keylocked Android Phone</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-18T18:55:31+02:00" pubdate data-updated="true">May 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently a good friend of mine passed away suddenly. Her family asked me to recover her photos and videos from her computer and android phone. The computer was easy enough, but the android phone posed a real problem. It had a keylock enabled, and USB debugging disabled. There was no external SD card to pull out, which meant that all the photos were stored on the internal memory. The phone was a totally stock Samsung Galaxy S3 mini. With a lot of reading, I worked out a way to get a data dump from her phone without having to bypass the keylock.</p>

<h2>1) Get Clockworkmod Recovery</h2>

<p><a href="https://www.clockworkmod.com/">Clockworkmod recovery</a> is a familiar tool to anyone who has ever rooted their Android phone or installed a custom ROM. I run my own phone on <a href="http://www.cyanogenmod.org/">Cyanogenmod</a>, so I knew the broad strokes of how to install and use it. If you haven&rsquo;t done this before: your Android device actually has several partitions on it for various kinds of data. Your device actually has several different boot &ldquo;modes&rdquo;, which are activated by various key combinations on startup. One of the boot modes, &ldquo;recovery&rdquo;, is specifically there to allow critical system access and maintenance. This is where Clockworkmod lives.</p>

<p>Download the <a href="https://www.clockworkmod.com/rommanager">Clockworkmod ROM for your device</a>. Use the &ldquo;Touch Recovery&rdquo; version if your touchscreen is working, since it&rsquo;s the easiest to use.</p>

<h2>2) Get a tool to flash your device</h2>

<p>There are many tools out there to help you flash various partitions on your device. Samsung devices are built for a tool called Odin, which was leaked from the company some time ago. Unfortunately Odin is Windows-only and not all that stable&hellip; but there is a great cross-platform, open source alternative called <a href="http://glassechidna.com.au/heimdall/">Heimdall</a>. Get Heimdall, at least, and optionally JOdin3.</p>

<p>Heimdall has an awesome command line interface, and a decent GUI if you&rsquo;re brave and know what you&rsquo;re talking about. I found it much easier to understand by using the Java based (AKA multi-platform) frontend <a href="http://casual-dev.com/2014/01/04/jodin3-web-browser-or-offline-flashing-tool/">JOdin3</a>. Even though in the end I couldn&rsquo;t get JOdin3 to do the job for me, its interface was intuitive enough that I could then understand what was going on from the command line.</p>

<p>So all you REALLY need here, is Heimdall or the equivalent for your device. But a GUI can be nice.</p>

<h2>3) Get Clockworkmod onto your device</h2>

<p><em>NOTE: THE INSTRUCTIONS IN THIS SECTION ONLY APPLY TO SAMSUNG DEVICES. A SIMPLE GOOGLE SEARCH WILL FIND APPROPRIATE INSTRUCTIONS FOR OTHER DEVICES.</em></p>

<h3>Get into Download mode</h3>

<p>In order for Heimdall/JOdin3/Odin/whatever to connect to your device, it has to be in &ldquo;Download&rdquo; mode, sometimes called &ldquo;Odin&rdquo; mode. Google will help you find instructions for your specific device, but for the Samsung Galaxy S3 Mini, I had to do the following:</p>

<ul>
<li>Power off. You can do this even when the keypad is locked, just by holding down the power button for long enough.</li>
<li>Press and hold the power, volume down, and home keys simultaneously until the phone starts and a warning screen appears.</li>
<li>Pay attention to the warning screen, and press volume up when you are ready to continue.</li>
</ul>


<p>A phone in Download mode looks kinda scary. There&rsquo;s not much on the screen, but it does explain quite clearly that it is in Download mode or Odin mode, and that the current firmware is the stock firmware.</p>

<p>Now plug the device into your computer via USB, and make sure Heimdall can see it by running this on the computer:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo heimdall detect</span></code></pre></td></tr></table></div></figure>


<p>(note: I&rsquo;m not sure that you really need sudo for these operations, but might as well)</p>

<h3>Figure out which partition you&rsquo;re flashing</h3>

<p>In order to update the data on a partition, Heimdall needs to know how the partitions are laid out on your device. Samsung devices can dump their partition table in a format called PIT. Heimdall can actually handle getting the PIT file automatically, but you still need to have a look to see which partition you want to be working on. So first run</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo heimdall print-pit</span></code></pre></td></tr></table></div></figure>


<p>This will give you a full dump of all the partitions on your device. It&rsquo;s quite readable; look for the partition with the Flash Filename &ldquo;recovery.img&rdquo;. It should look something like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>--- Entry #20 ---
</span><span class='line'>Binary Type: 0 (AP)
</span><span class='line'>Device Type: 2 (MMC)
</span><span class='line'>Identifier: 19
</span><span class='line'>Attributes: 5 (Read/Write)
</span><span class='line'>Update Attributes: 1 (FOTA)
</span><span class='line'>Partition Block Size: 491520
</span><span class='line'>Partition Block Count: 32768
</span><span class='line'>File Offset (Obsolete): 0
</span><span class='line'>File Size (Obsolete): 0
</span><span class='line'>Partition Name: Kernel2
</span><span class='line'>Flash Filename: recovery.img
</span><span class='line'>FOTA Filename:</span></code></pre></td></tr></table></div></figure>


<p><em>DO NOT SKIP THIS STEP</em>. In theory all Samsung Galaxy S3 minis are identical, but if yours is not you could brick your device! It&rsquo;s very easy to do.</p>

<p>Figure out the Identifier for that partition. In my case it was &ldquo;19&rdquo;.</p>

<h3>Flash your recovery partition</h3>

<p>Now that you know which partition you want to flash, and you have a file to flash it with, you can actually flash it with heimdall. Note that your phone probably restarted after running that PIT command, so you&rsquo;ll have to get back into Download mode again. Then just run:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo heimdall flash --19 recovery.img</span></code></pre></td></tr></table></div></figure>


<p>In that command, &ldquo;19&rdquo; is the identifier of the partition I want to flash, and &ldquo;recovery.img&rdquo; is the clockworkmod ROM which I downloaded right at the beginning of the post. It will show you step by step what&rsquo;s going on, and then reboot the phone upon success.</p>

<h2>4) Connect to the phone with ADB</h2>

<p>Android has a wonderful tool in the SDK, intended for debugging problems with android devices. It&rsquo;s called ADB, and it lets you connect to the android device over USB and run a variety of commands. It even lets you get into a shell on the device! If you don&rsquo;t have ADB already, download the <a href="https://developer.android.com/sdk/index.html">Android Developer Tools</a>. If you aren&rsquo;t planning on actually developing and just need ADB (like me), then install from the slightly smaller package on that page, listed under &ldquo;Use an existing IDE&rdquo;.</p>

<p>Once you&rsquo;ve downloaded and installed the developer tools, you can find the ADB command in the platform-tools directory from the download.</p>

<p>ADB cannot communicate with a phone unless &ldquo;enable USB debugging&rdquo; is turned on in the phone&rsquo;s Settings interface&hellip; but when you&rsquo;re locked out that&rsquo;s impossible. Fortunately, if you boot into Clockworkmod Recovery, Debugging is turned on by default. So reboot into Clockworkmod by holding down the power, home, and volume up keys.</p>

<p>When clockworkmod recovery has loaded, test the connection with ADB by running:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adb devices</span></code></pre></td></tr></table></div></figure>


<p>If you see your device listed, you&rsquo;re in business! You can now pull files from the android device with &ldquo;adb pull [filename] [destination]&rdquo;. Of course, that&rsquo;s assuming you know your way around the android filesystem!</p>

<p>I found the easiest way to get all the data was to use ClockworkMod&rsquo;s built in backup system to make a backup of all data on the phone (this takes a few minutes), then I could pull the backups because I knew which directory they were in. After running the backup, all I had to do was</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adb pull /data/media/clockworkmod/backup ~/Desktop/android-backup</span></code></pre></td></tr></table></div></figure>


<p>All of my friend&rsquo;s photos, videos, and contacts were stored in the Data tar archive. I hope this helps someone else out there!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/12/why-use-an-ide-when-vim-is-so-awesome/">Why Use an IDE When Vim Is So Awesome?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-12T14:08:39+02:00" pubdate data-updated="true">May 12<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One thing I&rsquo;ve never really understood is IDEs. I mean, I get it when you have a complex, emulated environment as a key part of your development. But for the majority of us who write in high level languages like PHP or Ruby, I just don&rsquo;t see the benefit. Why use some mouse-y, graphics dependent piece of software when you can use the ubiquitous Vim?</p>

<p>I use Vim because:</p>

<ul>
<li>It can do everything any IDE I&rsquo;ve seen can do. Syntax highlighting, code completion, easy documentation access and writing, <a href="http://www.vim.org/scripts/script.php?script_id=2508">debugger support</a>&hellip;</li>
<li>It&rsquo;s available on every machine I work with (OSX/Linux/Unix) by default</li>
<li>The configuration is portable, so I can have the same, totally customized environment on every machine I work with.</li>
<li>It&rsquo;s just way faster and more elegant than any IDE I&rsquo;ve seen.</li>
</ul>


<p>I&rsquo;m open to learning new things, and if I&rsquo;m missing out on some huge productivity benefit by sticking with Vim, I&rsquo;d like to know about it. So this post will lay out my particular Vim setup, in the hopes that someone will comment with an IDE that could do more for me.</p>

<h3>Configuration portability</h3>

<p>It&rsquo;s worth noting that I keep all my standard configurations in a git repo. Specifically I mean my bash configuration, my ssh configuration, and my vim config. This means that when I set up a new machine, I can feel right at home with a simple &ldquo;git clone&rdquo;. IF you don&rsquo;t do this yet, you&rsquo;re suffering needlessly.</p>

<p>All this to say, bear in mind the big advantage that with one command, I can have my totally customized Vim &ldquo;IDE&rdquo; up and running on any serious (ie non-Windows) machine.</p>

<h3>Global behaviors</h3>

<p>I love the customizability of vim. Here&rsquo;s the first section of my ~/.vimrc file, which sets up the basic editor behaviors just the way I like &lsquo;em:</p>

<figure class='code'><figcaption><span>~/.vimrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Editor behaviors</span>
</span><span class='line'><span class="k">set</span> <span class="nb">nocompatible</span> <span class="c">&quot; to get all the Vim-only options</span>
</span><span class='line'><span class="nb">syntax</span> enable <span class="c">&quot; enable syntax highlighting</span>
</span><span class='line'><span class="k">filetype</span> plugin indent <span class="k">on</span> <span class="c">&quot;enable filetype detection</span>
</span><span class='line'><span class="k">set</span> <span class="nb">showmode</span>  <span class="c">&quot; shows the current mode</span>
</span><span class='line'><span class="k">set</span> <span class="nb">backspace</span><span class="p">=</span>indent<span class="p">,</span><span class="nb">eol</span><span class="p">,</span><span class="k">start</span> <span class="c">&quot;backspaces behave like backspaces</span>
</span><span class='line'><span class="k">set</span> <span class="nb">hidden</span> <span class="c">&quot;good multi-file behaviors</span>
</span><span class='line'><span class="k">set</span> <span class="nb">wildmenu</span> <span class="c">&quot;better command line completion</span>
</span><span class='line'><span class="k">set</span> <span class="nb">wildmode</span><span class="p">=</span><span class="nb">list</span>:longest <span class="c">&quot; completion acts like the shell</span>
</span><span class='line'><span class="k">set</span> <span class="nb">ignorecase</span>  <span class="c">&quot;case-insensitive searching</span>
</span><span class='line'><span class="k">set</span> <span class="nb">smartcase</span> <span class="c">&quot;unless there&#39;s a capital letter there</span>
</span><span class='line'><span class="k">set</span> <span class="nb">ruler</span> <span class="c">&quot;show cursor position in the corner</span>
</span><span class='line'><span class="k">set</span> <span class="nb">hlsearch</span> <span class="c">&quot;highlight search matches</span>
</span><span class='line'><span class="k">set</span> <span class="nb">incsearch</span> <span class="c">&quot;highlight search matches as I type</span>
</span><span class='line'><span class="k">set</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span> <span class="c">&quot; Always show a status line at the bottom</span>
</span><span class='line'><span class="k">set</span> <span class="nb">statusline</span><span class="p">=</span>[%<span class="k">n</span>]\ %<span class="p">&lt;</span>%.<span class="m">99</span>f\ %<span class="k">h</span>%<span class="k">w</span>%<span class="k">m</span>%<span class="k">r</span>%<span class="k">y</span>\ %{exists<span class="p">(</span><span class="s1">&#39;*CapsLockStatusline&#39;</span><span class="p">)</span>?CapsLockStatusline<span class="p">()</span>:<span class="s1">&#39;&#39;</span>}%<span class="p">=</span>%<span class="m">-16</span><span class="p">(</span>\ %<span class="k">l</span><span class="p">,</span>%<span class="k">c</span><span class="p">-</span>%<span class="k">v</span>\ %<span class="p">)</span>%<span class="k">P</span>
</span><span class='line'><span class="k">set</span> <span class="nb">backupdir</span> <span class="p">=~</span><span class="sr">/.vim/</span><span class="nb">backup</span>
</span><span class='line'><span class="k">set</span> <span class="nb">wrap</span>  <span class="c">&quot;linewraps</span>
</span><span class='line'><span class="k">set</span> <span class="nb">scrolloff</span><span class="p">=</span><span class="m">5</span> <span class="c">&quot;always show 5 lines before/after the cursor</span>
</span><span class='line'><span class="k">set</span> <span class="nb">title</span> <span class="c">&quot;update term title</span>
</span><span class='line'><span class="k">set</span> <span class="nb">visualbell</span> <span class="c">&quot;turn off audio beeps</span>
</span></code></pre></td></tr></table></div></figure>


<p>I also like the <a href="http://ethanschoonover.com/solarized">solarized color scheme</a>:</p>

<figure class='code'><figcaption><span>~/.vimrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot;Solarized VIM color scheme</span>
</span><span class='line'><span class="k">set</span> <span class="nb">background</span><span class="p">=</span><span class="nb">dark</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:solarized_termcolors<span class="p">=</span><span class="m">16</span>
</span><span class='line'><span class="k">colorscheme</span> solarized
</span></code></pre></td></tr></table></div></figure>


<p>These settings apply to everything I edit, no matter where, from Markdown to text.</p>

<h3>Drupal-specific behaviors</h3>

<p>I base my Drupal config on the great <a href="https://drupal.org/projects/vimrc">vimrc</a> project for Drupal. It helped me get set up with Drupal API specific features like:</p>

<ul>
<li>syntax highlighting</li>
<li>in-editor access to API documentation</li>
<li>auto-completion (Vim&rsquo;s normal PHP auto-complete enhanced with Drupal-specific keywords)</li>
<li>integration with Drush, the Drupalist&rsquo;s command line tool of choice</li>
<li>code snippet auto-completion. For example, I can type hook_block, press TAB, and prepopulate implementations of all the block hooks, complete with documentation (doxygen) blocks.</li>
</ul>


<p>This is easy enough to set up for yourself with a couple of Drush commands (see the project&rsquo;s page on drupal.org), so I&rsquo;m just going to leave the &ldquo;tip of the iceberg&rdquo; that actually shows in my .vimrc file.</p>

<figure class='code'><figcaption><span>~/.vimrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Following lines added by drush vimrc-install</span>
</span><span class='line'><span class="k">set</span> <span class="nb">nocompatible</span>
</span><span class='line'><span class="k">call</span> pathogen#infect<span class="p">(</span><span class="s1">&#39;/$HOME/.drush/vimrc/bundle/{}&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">call</span> pathogen#infect<span class="p">(</span><span class="s1">&#39;/$HOME/.vim/bundle/{}&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c">&quot; End of vimrc-install additions.</span>
</span><span class='line'>
</span><span class='line'>source $VIMRUNTIME/vimrc_example.<span class="k">vim</span>
</span><span class='line'><span class="k">filetype</span> plugin <span class="k">on</span>
</span><span class='line'><span class="k">filetype</span> plugin indent <span class="k">on</span>
</span></code></pre></td></tr></table></div></figure>


<p>I also have a couple of manually entered behaviors: double space for indents, and Drupal Coding standards in Syntastic:</p>

<figure class='code'><figcaption><span>~/.vimrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Drupal coding standards for syntastic</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:syntastic_phpcs_conf<span class="p">=</span><span class="s2">&quot;--standard=DrupalCodingStandard&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot;Tab sizes - use 2 spaces for tab spacing</span>
</span><span class='line'><span class="k">set</span> <span class="nb">softtabstop</span><span class="p">=</span><span class="m">2</span>
</span><span class='line'><span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">2</span>
</span><span class='line'><span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">2</span>
</span><span class='line'><span class="k">set</span> <span class="nb">expandtab</span> <span class="c">&quot;save as spaces rather than tabs</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other IDE-like behaviors</h3>

<p>I find I don&rsquo;t need much more than this setup, but it is nice to have a file explorer. There are a few plugin options for Vim, but I always liked the built in netrw. I customize it using this snippet from <a href="http://ivanbrennan.github.io/blog/2014/01/16/rigging-vims-netrw/">detached head</a>:</p>

<figure class='code'><figcaption><span>~/.vimrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; File explorer with \ [TAB] or \ `</span>
</span><span class='line'><span class="k">fun</span><span class="p">!</span> VexToggle<span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> exists<span class="p">(</span><span class="s2">&quot;t:vex_buf_nr&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">call</span> VexClose<span class="p">()</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="k">call</span> VexOpen<span class="p">(</span><span class="k">a</span>:<span class="nb">dir</span><span class="p">)</span>
</span><span class='line'>  <span class="k">endif</span>
</span><span class='line'><span class="k">endf</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span><span class="p">!</span> VexOpen<span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
</span><span class='line'>  <span class="k">let</span> <span class="k">g</span>:netrw_browse_split<span class="p">=</span><span class="m">4</span>    <span class="c">&quot; open files in previous window</span>
</span><span class='line'>  <span class="k">let</span> vex_width <span class="p">=</span> <span class="m">25</span>
</span><span class='line'>
</span><span class='line'>  execute <span class="s2">&quot;Vexplore &quot;</span> . <span class="k">a</span>:<span class="nb">dir</span>
</span><span class='line'>  <span class="k">let</span> <span class="k">t</span>:vex_buf_nr <span class="p">=</span> bufnr<span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">wincmd</span> H
</span><span class='line'>
</span><span class='line'>  <span class="k">call</span> VexSize<span class="p">(</span>vex_width<span class="p">)</span>
</span><span class='line'><span class="k">endf</span>
</span><span class='line'><span class="nb">noremap</span> <span class="p">&lt;</span>Leader<span class="p">&gt;&lt;</span>Tab<span class="p">&gt;</span> :<span class="k">call</span> VexToggle<span class="p">(</span>getcwd<span class="p">())&lt;</span>CR<span class="p">&gt;</span>
</span><span class='line'><span class="nb">noremap</span> <span class="p">&lt;</span>Leader<span class="p">&gt;</span>` :<span class="k">call</span> VexToggle<span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)&lt;</span>CR<span class="p">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span><span class="p">!</span> VexClose<span class="p">()</span>
</span><span class='line'>  <span class="k">let</span> cur_win_nr <span class="p">=</span> winnr<span class="p">()</span>
</span><span class='line'>  <span class="k">let</span> target_nr <span class="p">=</span> <span class="p">(</span> cur_win_nr <span class="p">==</span> <span class="m">1</span> ? winnr<span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> : cur_win_nr <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="m">1</span>wincmd <span class="k">w</span>
</span><span class='line'>  <span class="k">close</span>
</span><span class='line'>  unlet <span class="k">t</span>:vex_buf_nr
</span><span class='line'>
</span><span class='line'>  execute <span class="p">(</span>target_nr <span class="p">-</span> <span class="m">1</span><span class="p">)</span> . <span class="s2">&quot;wincmd w&quot;</span>
</span><span class='line'>  <span class="k">call</span> NormalizeWidths<span class="p">()</span>
</span><span class='line'><span class="k">endf</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span><span class="p">!</span> VexSize<span class="p">(</span>vex_width<span class="p">)</span>
</span><span class='line'>  execute <span class="s2">&quot;vertical resize&quot;</span> . <span class="k">a</span>:vex_width
</span><span class='line'>  <span class="k">set</span> <span class="nb">winfixwidth</span>
</span><span class='line'>  <span class="k">call</span> NormalizeWidths<span class="p">()</span>
</span><span class='line'><span class="k">endf</span>
</span><span class='line'>
</span><span class='line'><span class="k">fun</span><span class="p">!</span> NormalizeWidths<span class="p">()</span>
</span><span class='line'>  <span class="k">let</span> eadir_pref <span class="p">=</span> &amp;<span class="nb">eadirection</span>
</span><span class='line'>  <span class="k">set</span> <span class="nb">eadirection</span><span class="p">=</span>hor
</span><span class='line'>  <span class="k">set</span> <span class="nb">equalalways</span><span class="p">!</span> <span class="nb">equalalways</span><span class="p">!</span>
</span><span class='line'>  <span class="k">let</span> &amp;<span class="nb">eadirection</span> <span class="p">=</span> eadir_pref
</span><span class='line'><span class="k">endf</span>
</span><span class='line'>augroup NetrwGroup
</span><span class='line'>  autocmd<span class="p">!</span> <span class="nb">BufEnter</span> * <span class="k">call</span> NormalizeWidths<span class="p">()</span>
</span><span class='line'>augroup END
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:netrw_liststyle<span class="p">=</span><span class="m">0</span>         <span class="c">&quot; thin (change to 3 for tree)</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:netrw_banner<span class="p">=</span><span class="m">0</span>            <span class="c">&quot; no banner</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:netrw_altv<span class="p">=</span><span class="m">1</span>              <span class="c">&quot; open files on right</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:netrw_preview<span class="p">=</span><span class="m">1</span>           <span class="c">&quot; open previews vertically</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; Change directory to the current buffer when opening files.</span>
</span><span class='line'><span class="k">set</span> <span class="nb">autochdir</span>
</span></code></pre></td></tr></table></div></figure>


<p>I also like to improve the auto-complete behavior with this snippet from <a href="http://vim.wikia.com/wiki/Omni_completion">vim.wikia.com</a> and linked pages:</p>

<figure class='code'><figcaption><span>~/.vimrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Enable omni completion (&lt;C-X&gt;&lt;C-O&gt; when in Insert mode)</span>
</span><span class='line'><span class="k">set</span> <span class="nb">omnifunc</span><span class="p">=</span>syntaxcomplete#Complete
</span><span class='line'><span class="c">&quot; Autocomplete behavior - complete as you type, use Enter to select.</span>
</span><span class='line'><span class="k">set</span> <span class="nb">completeopt</span><span class="p">=</span>longest<span class="p">,</span>menuone
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span>expr<span class="p">&gt;</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span> pumvisible<span class="p">()</span> ? <span class="s2">&quot;\&lt;C-y&gt;&quot;</span> : <span class="s2">&quot;\&lt;C-g&gt;u\&lt;CR&gt;&quot;</span>
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span>expr<span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">n</span><span class="p">&gt;</span> pumvisible<span class="p">()</span> ? <span class="s1">&#39;&lt;C-n&gt;&#39;</span> :
</span><span class='line'>  \ <span class="s1">&#39;&lt;C-n&gt;&lt;C-r&gt;=pumvisible() ? &quot;\&lt;lt&gt;Down&gt;&quot; : &quot;&quot;&lt;CR&gt;&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span>expr<span class="p">&gt;</span> <span class="p">&lt;</span>M<span class="p">-,&gt;</span> pumvisible<span class="p">()</span> ? <span class="s1">&#39;&lt;C-n&gt;&#39;</span> :
</span><span class='line'>  \ <span class="s1">&#39;&lt;C-x&gt;&lt;C-o&gt;&lt;C-n&gt;&lt;C-p&gt;&lt;C-r&gt;=pumvisible() ? &quot;\&lt;lt&gt;Down&gt;&quot; : &quot;&quot;&lt;CR&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>IDE Alternatives?</h3>

<p>I&rsquo;m willing to look at &ldquo;real&rdquo; IDEs that can make my coding life easier, faster, and more efficient. But every time, I keep coming back to vim. Maybe it&rsquo;s because it&rsquo;s a part of my consistent environment everywhere. In any case, I&rsquo;m interested in any ideas offered in the comments. :) So what alternatives should I check out? Or what could I do to make my Vim IDE even better?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/01/coder-vs-themer-ultimate-grudge-match-smackdown-fight-to-the-death/">Coder vs. Themer Ultimate Grudge Match Smackdown Fight to the Death</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-01T17:15:31+02:00" pubdate data-updated="true">May 1<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m really excited about a new session that I&rsquo;ve been doing with my friend and colleague, <a href="https://twitter.com/adamjurantenor">Adam Juran aka scaragucc</a>: the Coder vs Themer Ultimate Grudge Match Smackdown Fight to the Death! The basic premise: we both start with the same wireframe of a front page to build. But <em>I&rsquo;m only allowed to use the module layer, and Adam is only allowed to use the theme layer</em>. It&rsquo;s a really fun and entertaining way to play with the blurry lines between &ldquo;coder&rdquo; and &ldquo;themer&rdquo;. We get the audience pretty pumped up, which is impressive for a session that&rsquo;s basically about watching other people code!</p>

<p>If you didn&rsquo;t catch it at <a href="http://szeged2014.drupaldays.org/program/sessions/themer-vs-coder-ultimate-grudge-smackdown-fight-death">Drupal Dev Days in Szeged</a>, or at <a href="https://2014.drupalcamp-frankfurt.de/session/themer-vs-coder-ultimate-grudge-smackdown-fight-death">Drupalcamp Frankfurt</a>, you&rsquo;re probably going to have to wait for Drupalcon Amsterdam to take part! But I do have a video of the session at Frankfurt, just to whet your appetite. :)</p>

<iframe width="768" height="432" src="//www.youtube-nocookie.com/embed/Rly9D3-gc4w" frameborder="0" allowfullscreen></iframe>


<p>You can consider this a challenge: if any other themers out there want to challenge me to a coder vs themer style battle, I&rsquo;ll be keynoting at <a href="http://drupalcamp.fi">Drupalcamp Helsinki</a> in a few weeks. I&rsquo;ll meet you there!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/02/how-to-create-a-custom-display-suite-field/">How to Create a Custom Display Suite Field</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-02T17:12:13+02:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few months ago I posted about <a href="https://ohthehugemanatee.org/blog/2014/01/03/how-to-create-a-custom-panels-pane">how to create a custom Panels pane</a>, a critical reference for anyone who uses Panels layouts. The other part of the toolkit for quick and awesome layouts is the <a href="https://drupal.org/projects/ds">Display Suite</a> module. With DS you can create new &ldquo;Display modes&rdquo; for your content, to be reused around the site. For example, on one recent site I had four standard ways to display my nodes: Full, Teaser, Mini-Teaser, and Search Result. DS made this configuration a cinch.</p>

<p>But just as in Panels you sometimes need a pane that isn&rsquo;t provided out of the box, in Display Suite you sometimes want to add a field that isn&rsquo;t really a field on your content. In a recent site build, I used this capability to include information from the Organic Groups a user belongs to on his profile as it appears in search results.</p>

<p>DS offers some ability to create this kind of custom field through the UI, but I&rsquo;m talking about more complicated outcomes where you need/want to use custom code instead. This is actually even easier than custom panels panes.</p>

<p>In our example, we will display the user&rsquo;s name, but backwards. Obviously you can do much more complex things with this, but it&rsquo;s nice to have a simple example!</p>

<h1>Declare your fields</h1>

<p>First we have to tell Display Suite about our new custom field. We do this with <a href="http://drupalcontrib.org/api/drupal/contributions!ds!ds.api.php/function/hook_ds_fields_info/7">hook_ds_fields_info()</a>.</p>

<figure class='code'><figcaption><span>mymodule.module</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//@file: Add a custom suite to display suite for Users.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Implements hook_ds_fields_info().</span>
</span><span class='line'><span class="sd"> * Declare my custom field.</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">function</span> <span class="nf">mymodule_ds_fields_info</span><span class="p">(</span><span class="nv">$entity_type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nv">$fields</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nv">$entity_type</span> <span class="o">==</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$fields</span><span class="p">[</span><span class="s1">&#39;backwards_username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>      <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Backwards Username&#39;</span><span class="p">),</span>
</span><span class='line'>      <span class="s1">&#39;field_type&#39;</span> <span class="o">=&gt;</span> <span class="nx">DS_FIELD_TYPE_FUNCTION</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;function&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mymodule_backwards_username&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entity_type</span> <span class="o">=&gt;</span> <span class="nv">$fields</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Any guesses whathappens next? That&rsquo;s right, we have to write our render function under the name we just declared. You can put anything here, really anything renderable at all.</p>

<figure class='code'><figcaption><span>mymodule.module</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Render function for the Backwards Username field.</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">function</span> <span class="nf">mymodule_backwards_username</span><span class="p">(</span><span class="nv">$field</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$field</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">check_plain</span><span class="p">(</span><span class="nb">strrev</span><span class="p">(</span><span class="nv">$field</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">));</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it. So simple, you&rsquo;ll wonder why you ever did it any other way!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/29/drupal-dev-days-szeged-2014/">Drupal Dev Days Szeged, or: Why You Should Attend Every Camp You Can</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-29T15:27:50+01:00" pubdate data-updated="true">Mar 29<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today is the last day of <a href="http://szeged2014.drupaldays.org/">Drupal Dev Days</a> in Szeged, Hungary, and I&rsquo;ve never been more full of the &ldquo;Drupal spirit!&rdquo;</p>

<p>One of Drupal&rsquo;s greatest strengths is the closness of its&#8217; community, how friendly and accepting they can be. Drupalcons are highlight events for many, not because of the learning as much as because of the social track: the chance to see old friends and make new ones. Even more important is the chance to experience in person this incredibly friendly community. I always loved the cons because you could approach really anybody, say &ldquo;hi&rdquo;, and ask them about their work with the platform. Seriously, anybody. From a new user to Dries himself.</p>

<p>That&rsquo;s become harder and harder as Drupal has grown more popular. In a convention of more than 3,000 people, you lose that feeling of being able to approach anybody. Instead, people silo into groups. In a best case it&rsquo;s a group that shares an interest in a sub-system (Rules junkies, Panels proselytizers, Features fans&hellip;), but in most cases it&rsquo;s because of shared connections outside the community. You end up hanging out with the same people you knew before the con. Of course you can still have fun, but that sense of community is lost.</p>

<p>One of the best parts of Drupal Dev Days Szeged was the way they encouraged people to mix, cross pollinate, and discuss. In a conference of 350 people I felt like I spoke to almost all of them. I could approach even the famous visitors and talk to them like a normal human being. I borrowed VGA adaptors from Gabor Hojtsy and Wim Leers, and neither of them batted an eye at it.</p>

<p>This kind of experience is so great, so positive and validating, that I recommend Drupal Camps for everyone. The ticket price is cheap, the location is always nearby, and the culture is fantastic. The sessions are every bit as good as most DrupalCon sessions (many of us use the Camps as a way to practice before the Con), and you will make great new friends.</p>

<p>Tl;DR: Drupal Dev Days in Szeged was fantastic. If you&rsquo;ve never been to a Drupal Camp event, get your butt onto <a href="http://www.drupical.com/">drupical.com</a> and find your nearest one today!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/02/11/a-year-between-the-cracks-of-decoupled-drupal/">Six Months Between the Cracks of Decoupled Drupal</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/11/05/writing-drupal-8-code-for-drupal-7/">Writing Drupal 8 Code for Drupal 7</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/31/developer-options-for-replacing-your-old-macbook-pro/">Developer Options for Replacing Your Old MacBook Pro</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/15/perfect-linux-mint-macbook-pro-9-2/">Perfect Linux Mint on My Macbook Pro 9,2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/13/getting-my-notes-out-of-evernote/">Getting My Notes Out of Evernote</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/ohthehugemanatee">@ohthehugemanatee</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ohthehugemanatee',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
<a class="twitter-timeline"  href="https://twitter.com/campbellvertesi"  data-widget-id="407927984901746688">Tweets by @campbellvertesi</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

    </section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Campbell Vertesi (ohthehugemanatee) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ohthehugemanatee';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
