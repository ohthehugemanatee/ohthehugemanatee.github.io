
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>More DD-WRT / Linksys WRT54G Troubleshooting - Oh, The Huge Manatee</title>
  <meta name="author" content="Campbell Vertesi (ohthehugemanatee)">

  
  <meta name="description" content="After my evening spent getting my DD-WRT firmware to a stable version (as opposed to the version recommended by the DD-WRT website), I had hoped &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ohthehugemanatee.org/2010/12/more-dd-wrt-linksys-wrt54g.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Oh, The Huge Manatee" type="application/atom+xml">
  <link href="/stylesheets/table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/stylesheets/fonts/prstartk/stylesheet.css" type="text/css" charset="utf-8" />








<meta name="author" content="Campbell Vertesi (ohthehugemanatee)">

<meta property="og:url" content="http://ohthehugemanatee.org/2010/12/more-dd-wrt-linksys-wrt54g.html" />
<meta property="og:type" content="article" />
<meta property="og:title" content="More DD-WRT / Linksys WRT54G Troubleshooting - Oh, The Huge Manatee" />
<meta property="og:description" content="A blog about technology, open source, and the web... from someone who works with all three." />
<!--
  <meta property="og:image" content="http://ohthehugemanatee.org/images/headshot.jpg" /> -->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46172182-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
<a href="/" style="float:right"><img  src="/images/oh_the_huge_manatee.png" /></a><div class="titles"><h1><a href="/">Oh, The Huge Manatee</a></h1>
  
    <h2>A blog about technology, open source, and the web... from someone who works with all three.</h2>
  
</div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <input type="hidden" name="sites" value="ohthehugemanatee.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search&hellip;"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about-me.html">Me</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">More DD-WRT / Linksys WRT54G Troubleshooting</h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2010-12-22T00:45:00+01:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content">
<div class="css-full-post-content js-full-post-content">
After my evening spent <a href="http://swearingatcomputers.blogspot.com/2010/12/dd-wrt-versioning-and-linksys-wrt54g.html">getting my DD-WRT firmware to a stable version</a> (as opposed to the version recommended by the DD-WRT website), I had hoped that I had seen the end of my wireless issues.<br /><br />No such luck.<br /><br />I have definitely seen an improvement - in a ping flood test, I&#8217;m only seeing 0.5% dropped packets now, which is an improvement over the 2% I was seeing before. &nbsp;But there are still periodic ping spikes where I drop a packet, then get something like an ~1100ms ping, then ~110ms, then back to normal at ~2ms. &nbsp;I tried leaving a ping running in the background today, and every Skype audio drop was accompanied by a dropped packet. &nbsp;So I&#8217;m going with correlation = causation and assuming that these periodic spikes which are causing my Skype audio drops. <br /><br />The first thing to do is understand the nature of the beast. &nbsp;So I graphed my pings:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_Ukp9db12h9g/TRE86KWHPjI/AAAAAAAAAAQ/bdvCijKJhdA/s1600/Pings+over+time.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="467" src="http://2.bp.blogspot.com/_Ukp9db12h9g/TRE86KWHPjI/AAAAAAAAAAQ/bdvCijKJhdA/s640/Pings+over+time.png" width="640" /></a></div><br />What&#8217;s interesting about this chart is not that Excel makes it difficult to label your axes. &nbsp;Excel is a pain in the ass sometimes, there&#8217;s no revelation there.<br /><br />I&#8217;m looking for patterns here. &nbsp;With one ping per second, my timeouts occur for packets 91, 128, 158, 160, 171, 199, 214, 219, 259, 274, and 366. &nbsp;The ping spikes occurred at 91, 183, 274, and 366. &nbsp;Note that dropped packets don&#8217;t count, so the spike at packet 91 is really after the one failed attempt for packet 91. <br /><br />Well, there&#8217;s definitely a pattern in the ping spikes - I get pings of &gt;800ms every 90 seconds or so. &nbsp;So one problem is happening every minute and a half. &nbsp;The other problem starts after that first dropped packet, where I drop a packet every 10-20 seconds.<br /><br />The first culprit to suspect is always wireless interference, and sure enough, the vast majority of my neighbors are sharing channel 6 (2.437 Ghz range) with me. &nbsp;Here&#8217;s a handy chart I used to work out the best channel to avoid my neighbors&#8217; traffic.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_Ukp9db12h9g/TRFBGIzQE_I/AAAAAAAAAAU/1CSgfS9bANU/s1600/Wifi+channel_chart.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="377" src="http://2.bp.blogspot.com/_Ukp9db12h9g/TRFBGIzQE_I/AAAAAAAAAAU/1CSgfS9bANU/s640/Wifi+channel_chart.gif" width="640" /></a></div><br />Most of my neighbors are on 6 or 11, with a couple on 3. &nbsp;So I chose channel 1. &nbsp;This seemed to cut out a lot of the 10 second interval drops. &nbsp;Next I disabled the SPI firewall, to make sure I was minimizing the processing required for each packet. &nbsp;Here&#8217;s my ping graph after the change:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_Ukp9db12h9g/TRFEJRnfMmI/AAAAAAAAAAY/e0vQoZ-LT7w/s1600/pings+over+time+2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="462" src="http://2.bp.blogspot.com/_Ukp9db12h9g/TRFEJRnfMmI/AAAAAAAAAAY/e0vQoZ-LT7w/s640/pings+over+time+2.png" width="640" /></a></div><br /><br />As you can see, no more problem with dropped packets every 10-20 seconds, but I still get enormous ping spikes every 90 seconds, which resulted in only one dropped packet. &nbsp;Hey, it&#8217;s improvement! &nbsp;Another interesting element is that the ping spikes actually improved over time, while my average ping was significantly higher (23ms vs 19ms). &nbsp;I&#8217;m going with chance fluctuation on that one, I don&#8217;t have a good explanation for it. &nbsp;(note - I was using the web interface for the router at the time, and loaded up diagnostic pages for the two smaller spikes&#8230; so I&#8217;m not worried about them)<br /><br />So I had a look at DD-WRT&#8217;s own diagnostic pages, and noticed that the errors it was aware of were <b>all</b>&nbsp;transmit errors. The number one and two causes of transmit errors are too high ACK timing and too high transmit power. &nbsp;Dropping the ACK to 0 and setting transmit power to the (factory) 22mW didn&#8217;t help. <br /><br />So now I&#8217;m stuck. &nbsp;I definitely got some benefit here, though I&#8217;m not too happy that my average ping rose like that. &nbsp;But every 90 seconds SOMETHING happens that breaks my wireless connection. &nbsp;I&#8217;m going to puzzle over this for awhile.
</div>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Campbell Vertesi (ohthehugemanatee)</span></span>

      








  



  
<time datetime="2010-12-22T00:45:11+01:00" class="updated">Updated Dec 22<span>nd</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/dd-wrt/'>dd-wrt</a>, <a class='category' href='/blog/categories/diagnosis/'>diagnosis</a>, <a class='category' href='/blog/categories/wifi/'>wifi</a>, <a class='category' href='/blog/categories/wrt54g/'>wrt54g</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://ohthehugemanatee.org/2010/12/more-dd-wrt-linksys-wrt54g.html" data-via="campbellvertesi" data-counturl="http://ohthehugemanatee.org/2010/12/more-dd-wrt-linksys-wrt54g.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2010/12/dd-wrt-versioning-and-linksys-wrt54g.html" title="Previous Post: DD-WRT, versioning, and the Linksys WRT54G wireless router">&laquo; DD-WRT, versioning, and the Linksys WRT54G wireless router</a>
      
      
        <a class="basic-alignment right" href="/2010/12/net-neutrality-and-steve-wozniak.html" title="Next Post: Net Neutrality and Steve Wozniak">Net Neutrality and Steve Wozniak &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
<img src="/images/headshot.jpg" alt="Campbell Vertesi profile picture" />
<h1>About</h1>
<p>My name is <a href="https://campbell.vertesi.com/" title="Campbell Vertesi">Campbell Vertesi</a>. I work  with <a href="https://microsoft.com/" title="Microsoft">Microsoft</a> on cutting-edge Open Source. I'm also an <a href="https://thecastmusic.com/" title="The Cast - the opera band">opera singer</a>.</p>

<p>I've been working with computers for 21 years, with PHP and Drupal for 13 of those. I started with desktop repair, moved into sysadmin work, and eventually discovered web development. Since then I've been in most roles in the web consultant ecosystem: coder, themer, project manager, information architect, technical lead, CEO, and CTO. I've presented at many conferences, including almost 20 Drupalcons. <a href="/about-me.html" title="More about me">More about me</a>.</p>

<p>This is a technical blog that's partly a reference for myself, partly a pointer for all the instructions I end up writing for others, and partly a document of my technical history. I'm involved in a lot of different fields and specialties, and it's nice to have it all catalogued somewhere. I've written this blog on various platforms under different names, but this is where I'm hoping it will stay for awhile.</p>

<p>I'm not responsible for any damage caused to yourself, your family, your friends, your pets, or anything else as the result of using the information on this blog. Be smart and be careful.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/12/27/optimizing-data-transfer-speeds/">Optimizing Data Transfer Speeds</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/04/19/face-recognition-on-drupal/">Drupal Does Face Recognition: Introducing Image Auto Tag Module</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/02/07/the-number-1-question-i-get-asked-working-at-msy-do-you-run-linux/">The #1 Question I Get Asked Working at MS: Why Do You Run Linux?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/25/my-war-on-systemd-resolved/">My War on Systemd-resolved</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/08/im-joining-microsoft-because-theyre-doing-open-source-right/">I'm Joining Microsoft, Because They're Doing Open Source Right</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/ohthehugemanatee">@ohthehugemanatee</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ohthehugemanatee',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
<a class="twitter-timeline"  href="https://twitter.com/campbellvertesi"  data-widget-id="407927984901746688">Tweets by @campbellvertesi</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

    </section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Campbell Vertesi (ohthehugemanatee) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ohthehugemanatee';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ohthehugemanatee.org/2010/12/more-dd-wrt-linksys-wrt54g.html';
        var disqus_url = 'http://ohthehugemanatee.org/2010/12/more-dd-wrt-linksys-wrt54g.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
